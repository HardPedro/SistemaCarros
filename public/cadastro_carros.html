<!doctype html>
<html lang="pt-br">

<head>
    <script src="/dmxAppConnect/dmxAppConnect.js"></script>
    <base href="/">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastro de Ve√≠culos</title>
    <link rel="stylesheet" href="/css/cadastro_carros.css">
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Montserrat:wght@600;800;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
</head>

<body is="dmx-app" id="cadastro_carros">

    <style>
        /* grid igual ao seu two-cols, mas com bot√µes */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(190px, 1fr));
            gap: 10px 14px;
        }

        .options-grid .opt {
            display: contents;
        }

        /* permite o bot√£o ocupar a c√©lula toda */

        .opt-btn {
            height: 62px;
            width: 85%;
            border: 3px solid #cfd2d5;
            border-radius: 12px;
            padding: 12px 12px;
            font: 800 14px/1 "Montserrat", system-ui;
            text-transform: uppercase;
            color: #ffffff;
            background: #44484d;
            /* OFF */
            cursor: pointer;
            transition: transform .08s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
        }

        .opt-btn:hover {
            transform: translateY(-1px);
        }

        .opt-btn:active {
            transform: translateY(0);
        }

        /* estado ON (selecionado) */
        .opt-btn.active {
            background: #2e53a3ff;
            /* verde ON */
            border-color: #ffffffff;
            box-shadow: 0 0 0 3px rgba(39, 176, 255, 0.25);
        }


        .servicos-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(190px, 1fr));
            gap: 10px 14px;
        }

        /* Deixa o bot√£o ocupar a c√©lula inteira do grid */
        .servicos-grid .servui-option {
            display: contents;
        }

        /* Bot√£o de servi√ßo */
        .servui-btn {
            height: 62px;
            width: 85%;
            border: 3px solid #cfd2d5;
            border-radius: 12px;
            padding: 10px 12px;
            font: 800 14px/1 "Montserrat", system-ui;
            text-transform: uppercase;
            color: #fff;
            background: #44484d;
            /* estado OFF */
            cursor: pointer;
            transition: transform .08s ease,
                background .15s ease,
                border-color .15s ease,
                box-shadow .15s ease;
        }

        .servui-btn:hover {
            transform: translateY(-1px);
        }

        /* Estado ON (selecionado) */
        .servui-btn.active {
            background: #b4130eff;
            /* verde */
            border-color: #ffffffff;
            box-shadow: 0 0 0 3px rgba(236, 13, 13, 0.25);
        }

        /* Variante de alerta, se quiser marcar um bot√£o espec√≠fico com data-variant="danger" */
        .servui-btn.active[data-variant="danger"] {
            background: #ef4444;
            border-color: #c53030;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, .25);
        }

        /* variantes r√°pidas por data-variant, se quiser outra cor por item */
        /* .opt-btn[data-variant="danger"].active{ background:#ef4444; border-color:#c53030; box-shadow:0 0 0 3px rgba(239,68,68,.25);} */
    </style>

    <div class="page">

        <div class="esquerda">
            <!-- LADO ESQUERDO -->
            <aside class="left-pane">
                <figure class="photo-card">
                    <img src="imgs/car-placeholder.png" alt="Foto do ve√≠culo">
                    <figcaption>Foto do ve√≠culo</figcaption>
                </figure>

                <div class="car-title">
                    <strong>CAR NAME (BMW)</strong>
                    <span>ANO 24 HEISEI</span>
                </div>

                <div class="price-box"><span class="price">3.500.000¬•</span></div>

                <div class="actions">
                    <button class="ghost">Ôºã NOVO (F1)</button>
                    <button class="ghost">‚úé EDITAR (F2)</button>
                    <button class="ghost">‚ñÆ SALVAR (F5)</button>
                    <button class="danger">üóë DELETAR</button>
                </div>
            </aside>

        </div>


        <div class="centro">
            <!-- CENTRO: TPageControl -->
            <main class="center-pane">
                <nav class="tabs" role="tablist" aria-label="Se√ß√µes do ve√≠culo">
                    <button class="item tab-btn active" role="tab" aria-selected="true" data-tab-target="#tab-dados">Dados Ve√≠culos</button>
                    <button class="item tab-btn" role="tab" aria-selected="false" data-tab-target="#tab-opcionais">Opcionais Ve√≠culo</button>
                    <button class="item tab-btn" role="tab" aria-selected="false" data-tab-target="#tab-servicos">Servi√ßos Realizados</button>
                    <button class="item tab-btn" role="tab" aria-selected="false" data-tab-target="#tab-historico">Hist√≥rico Placas</button>
                </nav>

                <section class="tab-panels">
                    <!-- ABA 1 -->
                    <div class="tab-panel active" id="tab-dados" role="tabpanel">
                        <form class="grid-form" autocomplete="off">
                            <label>Fabricante<input type="text"></label>
                            <label>Modelo<input type="text"></label>
                            <label>Cor<input type="text"></label>

                            <label>Ano de Fabrica√ß√£o<input type="text"></label>
                            <label>Km Rodados<input type="text"></label>
                            <label>Cilindrada<input type="text"></label>

                            <label>Tipo Motor<input type="text"></label>
                            <label>Chassis<input type="text"></label>
                            <label>N√∫mero Modelo<input type="text"></label>

                            <label>Tra√ß√£o<input type="text"></label>
                            <label>Transmiss√£o<input type="text"></label>
                            <label>Combust√≠vel<input type="text"></label>

                            <label>Qtd Portas<input type="number" min="0"></label>
                            <label>Qtd Pessoas<input type="number" min="0"></label>
                            <label>Tipo Ve√≠culo<input type="text"></label>

                            <label>Peso<input type="text"></label>
                            <label>Cap. de Carga<input type="text"></label>
                            <label>Shaken<input type="text"></label>

                            <label>Pre√ßo de Custo<input type="text"></label>
                            <label>Pre√ßo de Venda<input type="text"></label>
                            <label>Proced√™ncia<input type="text"></label>

                            <label class="full">Outros
                                <textarea rows="5"></textarea>
                            </label>
                        </form>
                    </div>

                    <!-- ABA 2 -->
                    <div class="tab-panel" id="tab-opcionais" role="tabpanel" aria-hidden="true">
                        <div class="pad two-cols options-grid" id="opcionais">
                            <!-- cada bot√£o tem um checkbox hidden pareado (mesmo valor) -->
                            <div class="opt">
                                <button type="button" class="opt-btn" data-value="ABS">ABS</button>
                                <input type="checkbox" name="opcionais[]" value="ABS" hidden>
                            </div>
                            <div class="opt">
                                <button type="button" class="opt-btn" data-value="Bancos el√©tricos">Bancos el√©tricos</button>
                                <input type="checkbox" name="opcionais[]" value="Bancos el√©tricos" hidden>
                            </div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="ESC">ESC</button><input type="checkbox" name="opcionais[]" value="ESC" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Key-Less">Key-Less</button><input type="checkbox" name="opcionais[]" value="Key-Less" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Porta de correr">Porta de correr</button><input type="checkbox" name="opcionais[]" value="Porta de correr" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Ve√≠culo especial">Ve√≠culo especial</button><input type="checkbox" name="opcionais[]" value="Ve√≠culo especial" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Alarme">Alarme</button><input type="checkbox" name="opcionais[]" value="Alarme" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Bancos de couro">Bancos de couro</button><input type="checkbox" name="opcionais[]" value="Bancos de couro" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="ETC">ETC</button><input type="checkbox" name="opcionais[]" value="ETC" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Kit Aero">Kit Aero</button><input type="checkbox" name="opcionais[]" value="Kit Aero" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Rebaixado">Rebaixado</button><input type="checkbox" name="opcionais[]" value="Rebaixado" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Vidros el√©tricos">Vidros el√©tricos</button><input type="checkbox" name="opcionais[]" value="Vidros el√©tricos" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="AirBag">AirBag</button><input type="checkbox" name="opcionais[]" value="AirBag" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Carro Novo">Carro Novo</button><input type="checkbox" name="opcionais[]" value="Carro Novo" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Teto Solar">Teto Solar</button><input type="checkbox" name="opcionais[]" value="Teto Solar" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Manual do Propriet√°rio">Manual do Propriet√°rio</button><input type="checkbox" name="opcionais[]" value="Manual do Propriet√°rio" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Rodas de alum√≠nio">Rodas de alum√≠nio</button><input type="checkbox" name="opcionais[]" value="Rodas de alum√≠nio" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="3 Fileiras de Bancos">3 Fileiras de Bancos</button><input type="checkbox" name="opcionais[]" value="3 Fileiras de Bancos" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Corredor">Corredor</button><input type="checkbox" name="opcionais[]" value="Corredor" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Far√≥is Xenom">Far√≥is Xenom</button><input type="checkbox" name="opcionais[]" value="Far√≥is Xenom" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Monitor Traseiro">Monitor Traseiro</button><input type="checkbox" name="opcionais[]" value="Monitor Traseiro" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Trava Autom√°tica">Trava Autom√°tica</button><input type="checkbox" name="opcionais[]" value="Trava Autom√°tica" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="4WD">4WD</button><input type="checkbox" name="opcionais[]" value="4WD" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="CD-MD">CD-MD</button><input type="checkbox" name="opcionais[]" value="CD-MD" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Hist√≥rico de Tenken">Hist√≥rico de Tenken</button><input type="checkbox" name="opcionais[]" value="Hist√≥rico de Tenken" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="N√£o fumante">N√£o fumante</button><input type="checkbox" name="opcionais[]" value="N√£o fumante" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Turbo">Turbo</button><input type="checkbox" name="opcionais[]" value="Turbo" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="C√¢mera frontal">C√¢mera frontal</button><input type="checkbox" name="opcionais[]" value="C√¢mera frontal" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Banco Sof√°">Banco Sof√°</button><input type="checkbox" name="opcionais[]" value="Banco Sof√°" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Dire√ß√£o Hidr√°ulica">Dire√ß√£o Hidr√°ulica</button><input type="checkbox" name="opcionais[]" value="Dire√ß√£o Hidr√°ulica" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Importados">Importados</button><input type="checkbox" name="opcionais[]" value="Importados" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Navi-TV">Navi-TV</button><input type="checkbox" name="opcionais[]" value="Navi-TV" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="√önico Dono">√önico Dono</button><input type="checkbox" name="opcionais[]" value="√önico Dono" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="C√¢mera Traseira">C√¢mera Traseira</button><input type="checkbox" name="opcionais[]" value="C√¢mera Traseira" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Ar Condicionado">Ar Condicionado</button><input type="checkbox" name="opcionais[]" value="Ar Condicionado" hidden></div>
                            <div class="opt"><button type="button" class="opt-btn" data-value="Ar Condicionado Traseiro">Ar Condicionado Traseiro</button><input type="checkbox" name="opcionais[]" value="Ar Condicionado Traseiro" hidden></div>
                        </div>

                    </div>

                    <!-- ABA 3 -->
                    <div class="tab-panel" id="tab-servicos" role="tabpanel" aria-hidden="true">
                        <div class="pad two-cols servicos-grid" id="servicos">
                            <!-- Cada bloco: bot√£o vis√≠vel + checkbox hidden que envia no form -->
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="ABS">Higieniza√ß√£o</button><input type="checkbox" name="opcionais[]" value="ABS" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Bancos el√©tricos">Polimento</button><input type="checkbox" name="opcionais[]" value="Bancos el√©tricos" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="ESC">Cristaliza√ß√£o</button><input type="checkbox" name="opcionais[]" value="ESC" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Key-Less">Limpeza do ar condicionado</button><input type="checkbox" name="opcionais[]" value="Key-Less" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Porta de correr">Troca de filtro do ar</button><input type="checkbox" name="opcionais[]" value="Porta de correr" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Ve√≠culo especial">Troca de √≥leo</button><input type="checkbox" name="opcionais[]" value="Ve√≠culo especial" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Alarme">Troca de filtro de √≥leo</button><input type="checkbox" name="opcionais[]" value="Alarme" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Bancos de couro">Troca de filtro do combust√≠vel</button><input type="checkbox" name="opcionais[]" value="Bancos de couro" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="ETC">Alinhamento dos pneus</button><input type="checkbox" name="opcionais[]" value="ETC" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Kit Aero">Troca de pneus</button><input type="checkbox" name="opcionais[]" value="Kit Aero" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Rebaixado">Troca da buzina</button><input type="checkbox" name="opcionais[]" value="Rebaixado" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Vidros el√©tricos">Troca dos cintos de seguran√ßa</button><input type="checkbox" name="opcionais[]" value="Vidros el√©tricos" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="AirBag">Troca de embreagem</button><input type="checkbox" name="opcionais[]" value="AirBag" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Carro Novo">Troca de fluido da dire√ß√£o hidr√°ulica</button><input type="checkbox" name="opcionais[]" value="Carro Novo" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Teto Solar">Troca de fluido de freio</button><input type="checkbox" name="opcionais[]" value="Teto Solar" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Manual do Propriet√°rio">Troca de limpadores de parabrisa</button><input type="checkbox" name="opcionais[]" value="Manual do Propriet√°rio" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Rodas de alum√≠nio">Troca de bateria</button><input type="checkbox" name="opcionais[]" value="Rodas de alum√≠nio" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="3 Fileiras de Bancos">Troca do sistema de freios</button><input type="checkbox" name="opcionais[]" value="3 Fileiras de Bancos" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Corredor">Troca do sistema de suspen√ß√£o</button><input type="checkbox" name="opcionais[]" value="Corredor" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Far√≥is Xenom">Troca de velas</button><input type="checkbox" name="opcionais[]" value="Far√≥is Xenom" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Monitor Traseiro">Troca do l√≠quido de arrefecimento</button><input type="checkbox" name="opcionais[]" value="Monitor Traseiro" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Trava Autom√°tica">Troca de fluido das transmiss√µes</button><input type="checkbox" name="opcionais[]" value="Trava Autom√°tica" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="4WD">Troca do filtro de cabine</button><input type="checkbox" name="opcionais[]" value="4WD" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="CD-MD">Troca de correia poly-v</button><input type="checkbox" name="opcionais[]" value="CD-MD" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Hist√≥rico de Tenken">Troca de correia dentada</button><input type="checkbox" name="opcionais[]" value="Hist√≥rico de Tenken" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="N√£o fumante">Correia do compressor do ar condicionado</button><input type="checkbox" name="opcionais[]" value="N√£o fumante" hidden></div>
                            <div class="servui-option"><button type="button" class="servui-btn" data-value="Turbo">Troca de correia do alternador</button>
                            </div>
                        </div>
                    </div>

                    <!-- ABA 4 -->
                    <div class="tab-panel" id="tab-historico" role="tabpanel" aria-hidden="true">
                        <div class="jp-plate-wrap">
                            <!-- Bot√£o visual da placa: clique alterna branca/amarela -->
                            <button type="button" class="jp-plate" id="jpPlate" aria-pressed="false" title="Clique para alternar: Futsuusha ‚Üî Keijid≈çsha">
                                <span class="plate-region" id="outRegion">Êù±‰∫¨</span>
                                <span class="plate-class" id="outClass">300</span>
                                <span class="plate-mark" id="outMark">„ÅÇ</span>
                                <span class="plate-number" id="outNumber"><span>12</span>-<span>34</span></span>
                                <span class="plate-type-badge" id="plateTypeBadge">ÊôÆÈÄöËªä</span>
                            </button>

                            <!-- Controles -->
                            <div class="jp-plate-controls">
                                <div class="row">
                                    <label>Regi√£o
                                        <input id="inRegion" type="text" placeholder="ex.: Êù±‰∫¨">
                                    </label>
                                    <label>Classe
                                        <input id="inClass" type="text" placeholder="ex.: 300">
                                    </label>
                                    <label>Hiragana
                                        <input id="inMark" type="text" placeholder="ex.: „ÅÇ" maxlength="1">
                                    </label>
                                    <label>N√∫mero
                                        <input id="inNumber" type="text" placeholder="ex.: 1234" pattern="\\d{4}" maxlength="4">
                                    </label>
                                </div>

                                <div class="actions">
                                    <button type="button" class="item2" id="btnApply">Aplicar na placa</button>
                                    <button type="button" class="item2" id="btnAddHistory">Adicionar ao hist√≥rico</button>
                                </div>
                            </div>

                            <!-- Hist√≥rico -->
                            <div class="jp-plate-history">
                                <div class="head">
                                    <strong>Hist√≥rico de placas</strong>
                                </div>
                                <ul id="plateHistory" class="list"></ul>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

        </div>

        <div class="direita">
            <!-- DIREITA: diagrama com pontos -->
            <aside class="right-pane">
                <div class="car-diagram">
                    <img src="/assets/images/diagram-car-top.png" alt="Diagrama do carro">
                    <!-- Ajuste as posi√ß√µes (%) conforme sua arte -->
                    <button class="dot" style="--x:50%; --y:15%"></button>
                    <button class="dot" style="--x:16%; --y:24%"></button>
                    <button class="dot" style="--x:84%; --y:24%"></button>
                    <button class="dot" style="--x:16%; --y:40%"></button>
                    <button class="dot" style="--x:84%; --y:40%"></button>
                    <button class="dot" style="--x:16%; --y:56%"></button>
                    <button class="dot" style="--x:84%; --y:56%"></button>
                    <button class="dot" style="--x:16%; --y:72%"></button>
                    <button class="dot" style="--x:84%; --y:72%"></button>
                    <button class="dot" style="--x:50%; --y:33%"></button>
                    <button class="dot" style="--x:50%; --y:71%"></button>
                    <button class="dot" style="--x:50%; --y:85%"></button>
                </div>
            </aside>

        </div>

    </div>

    <!-- JS: tabs + dots -->
    <script>
        // Altern√¢ncia de abas
    const tabButtons = document.querySelectorAll('.tab-btn');
    const panels = document.querySelectorAll('.tab-panel');

    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tgt = document.querySelector(btn.dataset.tabTarget);
        // header
        tabButtons.forEach(b => {
          const active = b === btn;
          b.classList.toggle('active', active);
          b.setAttribute('aria-selected', active ? 'true' : 'false');
        });
        // panels
        panels.forEach(p => {
          const active = (p === tgt);
          p.classList.toggle('active', active);
          p.toggleAttribute('aria-hidden', !active);
        });
      });
    });

    // Pontos: verde <-> vermelho
    document.querySelectorAll('.car-diagram .dot').forEach(dot => {
      dot.addEventListener('click', () => {
        dot.classList.toggle('alert');
      });
    });

 document.querySelectorAll('#opcionais .opt').forEach(w => {
    const btn = w.querySelector('.opt-btn');
    const chk = w.querySelector('input[type="checkbox"]');

    // estado inicial (se quiser pr√©-selecionados, marque o hidden no HTML)
    if (chk.checked) btn.classList.add('active');
    btn.setAttribute('aria-pressed', chk.checked ? 'true' : 'false');

    btn.addEventListener('click', () => {
      const on = !chk.checked;
      chk.checked = on;                       // mant√©m envio no form
      btn.classList.toggle('active', on);     // muda cor
      btn.setAttribute('aria-pressed', on ? 'true' : 'false');
    });
  });
    
(function initServicos(){
  const wrap = document.getElementById('servicos');
  if (!wrap) return;

  // Tenta descobrir o "name" padr√£o dos checkboxes existentes (ex.: 'opcionais[]')
  const sample = wrap.querySelector('input[type="checkbox"]');
  const defaultName = sample ? sample.getAttribute('name') : 'servicos[]';

  wrap.querySelectorAll('.servui-option').forEach(opt => {
    const btn = opt.querySelector('.servui-btn');
    if (!btn) return;

    // Pega (ou cria) o checkbox hidden pareado
    let chk = opt.querySelector('input[type="checkbox"]');
    if (!chk) {
      chk = document.createElement('input');
      chk.type = 'checkbox';
      chk.hidden = true;
      chk.name = defaultName;                 // mant√©m o mesmo name do bloco
      chk.value = btn.dataset.value || btn.textContent.trim();
      opt.appendChild(chk);
    } else {
      // Garante value coerente
      if (!chk.value) chk.value = btn.dataset.value || btn.textContent.trim();
    }

    // Estado inicial
    if (chk.checked) btn.classList.add('active');
    btn.setAttribute('aria-pressed', chk.checked ? 'true' : 'false');

    // Clique: alterna visual + hidden
    btn.addEventListener('click', () => {
      const on = !chk.checked;
      chk.checked = on;
      btn.classList.toggle('active', on);
      btn.setAttribute('aria-pressed', on ? 'true' : 'false');
    });
  });
})();

(function placaJaponesa(){
  const plate   = document.getElementById('jpPlate');
  const badge   = document.getElementById('plateTypeBadge');

  const inRegion = document.getElementById('inRegion');
  const inClass  = document.getElementById('inClass');
  const inMark   = document.getElementById('inMark');
  const inNumber = document.getElementById('inNumber');

  const outRegion = document.getElementById('outRegion');
  const outClass  = document.getElementById('outClass');
  const outMark   = document.getElementById('outMark');
  const outNumber = document.getElementById('outNumber');

  const btnApply = document.getElementById('btnApply');
  const btnAdd   = document.getElementById('btnAddHistory');
  const list     = document.getElementById('plateHistory');

  // 1) Alternar Futsuusha (branca) <-> Keijid≈çsha (amarela)
  plate.addEventListener('click', (e) => {
    // evita conflito se o usu√°rio clicar em inputs/bot√µes dentro do wrap (n√£o √© o caso aqui)
    if (e.target.closest('.jp-plate-controls')) return;

    const isKei = plate.classList.toggle('is-kei');
    plate.setAttribute('aria-pressed', isKei ? 'true' : 'false');
    badge.textContent = isKei ? 'ËªΩËá™ÂãïËªä' : 'ÊôÆÈÄöËªä';
  });

  // 2) Aplicar na placa (pega os campos e joga no visual)
  btnApply.addEventListener('click', () => {
    const region = (inRegion.value || outRegion.textContent).trim();
    const klass  = (inClass.value  || outClass.textContent).trim();
    const mark   = (inMark.value   || outMark.textContent).trim();
    const num    = (inNumber.value || outNumber.textContent.replace('-', '')).trim();

    // formata n√∫mero como "12-34" (2-2) se tiver 4 d√≠gitos
    let numFmt = outNumber.innerHTML;
    if (/^\d{4}$/.test(num)) {
      numFmt = `<span>${num.slice(0,2)}</span>-<span>${num.slice(2)}</span>`;
    }

    outRegion.textContent = region || 'Êù±‰∫¨';
    outClass.textContent  = klass  || '300';
    outMark.textContent   = mark   || '„ÅÇ';
    outNumber.innerHTML   = numFmt;

    // feedback sutil
    plate.animate([{filter:'brightness(1.2)'},{filter:'brightness(1)'}], {duration:180, easing:'ease-out'});
  });

  // 3) Adicionar ao hist√≥rico
  btnAdd.addEventListener('click', () => {
    const isKei = plate.classList.contains('is-kei');
    const txt   = `${outRegion.textContent} ${outClass.textContent} ${outMark.textContent} ${outNumber.textContent.replace(/<[^>]*>/g,'')} ‚Äî ${isKei ? 'Keijid≈çsha (amarela)' : 'Futsuusha (branca)'}`;

    const li = document.createElement('li');
    li.textContent = txt;
    list.prepend(li); // mais recente no topo

    // anima√ß√£ozinha
    li.animate([{opacity:0, transform:'translateY(-4px)'},{opacity:1, transform:'translateY(0)'}], {duration:160, easing:'ease-out'});
  });
})();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
</body>

</html>